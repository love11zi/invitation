define(function(require,e,t){function i(){function e(){size=50,pFontName="Lucida Sans Unicode",n.font=size+"pt "+pFontName,r1.alphatop<1?r1.alphatop+=.01:r1.alphatop=1,n.globalAlpha=r1.alphatop,n.textAlign="center",1===r1.alphatop&&(r1.velY*=.999,r1.velY+=.3,r1.x+=r1.velX,r1.y+=r1.velY),r1.y+r1.height>l&&(r1.anglespin=0,r1.y=l-r1.height,r1.velY*=-.8,r1.velX*=.9),n.globalAlpha=1;for(var e=0;e<d.length;e++)d[e].draw()}function t(){n.clearRect(0,0,o,l),e(),requestAnimationFrame(t)}function i(e,t){return e+Math.random()*(t-e)}function a(e){return e*(Math.PI/180)}for(var s=document.getElementById("slide-canvas"),n=s.getContext("2d"),o=s.width=window.innerWidth,l=s.height=window.innerHeight,d=[],f=["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4CAF50","#8BC34A","#CDDC39","#FFEB3B","#FFC107","#FF9800","#FF5722","#795548"],u=0;300>u;u++)d.push({x:o/2,y:l/2,boxW:i(5,20),boxH:i(5,20),size:i(2,8),spikeran:i(3,5),velX:i(-8,8),velY:i(-50,-10),angle:a(i(0,360)),color:f[Math.floor(Math.random()*f.length)],anglespin:i(-.2,.2),draw:function(){n.save(),n.translate(this.x,this.y),n.rotate(this.angle),n.fillStyle=this.color,n.beginPath(),n.fillRect(this.boxW/2*-1,this.boxH/2*-1,this.boxW,this.boxH),n.fill(),n.closePath(),n.restore(),this.angle+=this.anglespin,this.velY*=.999,this.velY+=.3,this.x+=this.velX,this.y+=this.velY,this.y<0&&(this.velY*=-.2,this.velX*=.9),this.y>l&&(this.anglespin=0,this.y=l,this.velY*=-.2,this.velX*=.9),(this.x>o||this.x<0)&&(this.velX*=-.5)}});r1={x:o/2-150,y:l/2-150,width:300,height:300,velX:0,velY:-10,alphatop:0},t()}var a=require("zepto"),s={init:function(){this.slidePage1(),this.slidePage2(),this.slidePage3()},slidePage1:function(){var e=a(".slide-page-1"),t=e.find("h1"),i=e.find(".poem"),s=e.find(".us"),n=e.find(".city");e.addClass("page-active;"),setTimeout(function(){t.removeClass("bounceOutDown").addClass("active bounceInDown")},1e3),setTimeout(function(){n.removeClass("fadeOut").addClass("active fadeIn")},1e3),setTimeout(function(){s.addClass("active")},2e3),setTimeout(function(){i.removeClass("zoomOut").addClass("active zoomIn")},2500)},slidePage2:function(){var e=a(".slide-page-2"),t=e.find("h1"),i=e.find(".poem"),s=e.find(".us"),n=e.find(".city1"),o=e.find(".city2");e.addClass("page-active;"),setTimeout(function(){t.removeClass("zoomOut").addClass("active zoomIn")},2e3),setTimeout(function(){n.removeClass("slideOutUp").addClass("active slideInUp"),o.removeClass("slideOutDown").addClass("active slideInDown")},1e3),setTimeout(function(){s.addClass("active")},3e3),setTimeout(function(){t.find(".railway img").addClass("moving"),s.find(".yy img").addClass("animated infinite wobble"),s.find(".tt img").addClass("animated infinite pulse"),i.removeClass("zoomOutLeft").addClass("active zoomInLeft")},5e3)},slidePage3:function(){var e=a(".slide-page-3"),t=e.find("h1"),s=e.find(".poem1"),n=e.find(".poem2"),o=e.find(".us"),l=e.find(".xi"),d=e.find(".city");e.addClass("page-active;"),setTimeout(function(){s.removeClass("fadeOutRight").addClass("active fadeInRight")},500),setTimeout(function(){n.removeClass("fadeOutLeft").addClass("active fadeInLeft")},1500),setTimeout(function(){d.removeClass("slideOutUp").addClass("active slideInUp")},2500),setTimeout(function(){t.removeClass("flipOutX").addClass("active flipInX")},2500),setTimeout(function(){o.removeClass("flipOutY").addClass("active flipInY")},3500),setTimeout(function(){l.removeClass("fadeOut").addClass("active fadeIn")},5e3),setTimeout(function(){i()},5e3)}};t.exports=s});